import api, { handleRequest } from './api';
import {  ApiResponse } from '../types';

interface CreateWikiPageData {
  title: string;
  content: string;
  parentId?: number;
  projectId: number;
  attachments?: string[];
}

const wikiService = {
  // Create a wiki page
  createWikiPage: (data: CreateWikiPageData): Promise<ApiResponse<any>> => {
    return handleRequest<any>(api.post('/wiki', data));
  },

  // Get all wiki pages
  getAllWikiPages: (projectId: number): Promise<ApiResponse<any[]>> => {
    return handleRequest<any[]>(api.get(`/wiki/project/${projectId}`));
  },

  // Get wiki page by ID
  getWikiPageById: (id: number): Promise<ApiResponse<any>> => {
    return handleRequest<any>(api.get(`/wiki/${id}`));
  },

  // Update wiki page
  updateWikiPage: (id: number, data: Partial<any>): Promise<ApiResponse<any>> => {
    return handleRequest<any>(api.put(`/wiki/${id}`, data));
  },

  // Delete wiki page
  deleteWikiPage: (id: number): Promise<ApiResponse<null>> => {
    return handleRequest<null>(api.delete(`/wiki/${id}`));
  },

  // Get wiki page history
  getWikiPageHistory: (id: number): Promise<ApiResponse<any[]>> => {
    return handleRequest<any[]>(api.get(`/wiki/${id}/history`));
  }
};

export default wikiService;